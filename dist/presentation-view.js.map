{"version":3,"sources":["webpack://presentation-view/webpack/universalModuleDefinition","webpack://presentation-view/webpack/bootstrap","webpack://presentation-view/external {\"commonjs\":\"next-core-utilities\",\"commonjs2\":\"next-core-utilities\",\"amd\":\"next-core-utilities\",\"root\":\"next-core-utilities\"}","webpack://presentation-view/external {\"commonjs\":\"next-core-object\",\"commonjs2\":\"next-core-object\",\"amd\":\"next-core-object\",\"root\":\"next-core-object\"}","webpack://presentation-view/external {\"commonjs\":\"lodash.bind\",\"commonjs2\":\"lodash.bind\",\"amd\":\"lodash.bind\",\"root\":\"lodash.bind\"}","webpack://presentation-view/./src/abstractView.js","webpack://presentation-view/./src/view.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_bind","DELEGATE_EVENT_SPLITTER","AbstractView","AugmentedObject","constructor","options","super","_name","permissions","_permissions","include","exclude","tagName","el","_el","model","collection","id","className","_style","style","attributes","cid","uniqueId","noEL","_ensureElement","template","render","remove","_removeElement","stopListening","isString","document","querySelector","innerHTML","setElement","element","undelegateEvents","delegateEvents","events","result","method","isFunction","match","delegate","eventName","selector","listener","matchesNL","querySelectorAll","matches","Array","from","length","addEventListener","new_el","cloneNode","parentNode","replaceChild","undelegate","removeEventListener","_createElement","createElement","attrs","extend","body","appendChild","_setAttributes","setAttribute","addPermission","permission","negative","isArray","push","removePermission","splice","indexOf","clearPermissions","matchesPermission","canDisplay","View","off"],"mappings":"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","file":"presentation-view.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"next-core-utilities\"), require(\"next-core-object\"), require(\"lodash.bind\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"presentation-view\", [\"next-core-utilities\", \"next-core-object\", \"lodash.bind\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"presentation-view\"] = factory(require(\"next-core-utilities\"), require(\"next-core-object\"), require(\"lodash.bind\"));\n\telse\n\t\troot[\"presentation-view\"] = factory(root[\"next-core-utilities\"], root[\"next-core-object\"], root[\"lodash.bind\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import { AugmentedObject } from \"next-core-object\";\nimport { uniqueId, isString, result, isFunction, extend } from \"next-core-utilities\";\nconst _bind = require(\"lodash.bind\");\n\n// Cached regex to split keys for `delegate`.\nconst DELEGATE_EVENT_SPLITTER = /^(\\S+)\\s*(.*)$/;\n\n/**\n * Aubstract View - the base view for handlng display in the MV* Concept\n * @extends AugmentedObject\n */\nclass AbstractView extends AugmentedObject {\n  constructor(options) {\n    super(options);\n    //console.debug(`options on AbstractView ${JSON.stringify(options)}`);\n    if (options && options.name) {\n      this._name = options.name;\n    } else {\n      this._name = \"Untitled\";\n    }\n    if (options && options.permissions) {\n      this._permissions = options.permissions;\n    } else {\n      this._permissions = {\n        include: [],\n        exclude: []\n      };\n    }\n    if (options && options.tagName) {\n      this.tagName = options.tagName;\n    } else {\n      this.tagName = \"div\";\n    }\n    if (options && options.el) {\n      this._el = options.el;\n    } else {\n      this._el = \"\";\n    }\n\n    if (options && options.model) {\n      this.model = options.model;\n    } else {\n      this.model = null;\n    }\n\n    if (options && options.collection) {\n      this.collection = options.collection;\n    } else {\n      this.collection = null;\n    }\n\n    if (options && options.id) {\n      this.id = options.id;\n    } else {\n      this.id = 0;\n    }\n\n    if (options && options.className) {\n      this._style = options.className;\n    } else {\n      this._style = \"\";\n    }\n\n    if (options && options.style) {\n      this._style = options.style;\n    } else {\n      this._style = \"\";\n    }\n\n    if (options && options.attributes) {\n      this.attributes = options.attributes;\n    } else {\n      this.attributes = {};\n    }\n\n    this.cid = uniqueId(\"view\");\n\n    if (options && options.noEL) {\n      // This is for Mediator\n    } else {\n      this._ensureElement();\n    }\n\n    /*this.render = Augmented.Utility.wrap(this.render, (render) => {\n      this.beforeRender();\n      render.apply(this);\n      this.afterRender();\n      return this;\n    });*/\n    if (options && options.template) {\n      this.template = options.template;\n    } else {\n      this.template = \"\";\n    }\n    this.options = options;\n  };\n\n  /**\n   * The name property of the view\n   * @property {string} name The Name of the view\n   * @private\n   */\n\n  /**\n   * Permissions in the view\n   * @property permissions\n   * @private\n   */\n\n   /**\n    * The element bound\n    * @property el\n    */\n   get el() {\n     return this._el;\n   };\n\n   set el(el) {\n     this._el = el;\n   };\n\n  /**\n   * Render callback for the view\n   * @returns this Context of the view\n   */\n  render() {\n    return this;\n  };\n\n  /**\n   * Remove this view by taking the element out of the DOM, and removing any\n   * applicable Events listeners.\n   */\n  remove() {\n    this._removeElement();\n    this.stopListening();\n    return this;\n  };\n\n  // Remove this view's element from the document and all event listeners\n  // attached to it. Exposed for subclasses using an alternative DOM\n  // manipulation API.\n  _removeElement() {\n    let el = this._el;\n    if (this._el && isString(this._el)) {\n      el = document.querySelector(this._el);\n    }\n    if (el) {\n      el.innerHTML = \"\";\n    }\n  };\n\n  /**\n   * Change the view's element (`this.el` property) and re-delegate the\n   * view's events on the new element.\n   */\n  setElement(element) {\n    //console.log(\"setting element\", element);\n    this.undelegateEvents();\n    this._el = element;\n    this.delegateEvents();\n    return this;\n  };\n\n  /**\n   * Creates the `this.el` and `this.$el` references for this view using the\n   * given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n   * context or an element. Subclasses can override this to utilize an\n   * alternative DOM manipulation API and are only required to set the\n   * `this.el` property.\n   *\n   * Set callbacks, where `this.events` is a hash of\n   * pairs. Callbacks will be bound to the view, with `this` set properly.\n   * Uses event delegation for efficiency.\n   * Omitting the selector binds the event to `this._el`.\n   * @example\n   * {\"event selector\": \"callback\"}\n   * @example\n   * {\n   *   'mousedown .title':  'edit',\n   *   'click .button':     'save',\n   *   'click .open':       (e) => { ... }\n   * }\n   */\n  delegateEvents(events) {\n    events || (events = result(this, \"events\"));\n    if (!events) {\n      return this;\n    }\n    this.undelegateEvents();\n    let key;\n    for (key in events) {\n      let method = events[key];\n      if (!isFunction(method)) {\n        method = this[method];\n      }\n      if (!method) {\n        continue;\n      }\n      const match = key.match(DELEGATE_EVENT_SPLITTER);\n      this.delegate(match[1], match[2], _bind(method, this));\n    }\n    return this;\n  };\n\n  /**\n   * Add a single event listener to the view's element (or a child element\n   * using `selector`). This only works for delegate-able events: not `focus`,\n   * `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n   */\n  delegate(eventName, selector, listener) {\n    const matchesNL = document.querySelectorAll(selector);\n    if (matchesNL) {\n      const matches = Array.from(matchesNL);\n      let i = 0;\n      const l = matches.length;\n      for (i = 0; i < l; i++) {\n        ////console.log(\"match\", matches[i]);\n        matches[i].addEventListener(eventName, listener);\n      }\n    }\n    return this;\n  };\n\n  /**\n   * Clears all callbacks previously bound to the view by `delegateEvents`.\n   * You usually don't need to use this, but may wish to if you have multiple\n   * views attached to the same DOM element.\n   */\n  undelegateEvents() {\n    ////console.log(\"undelegateEvents\");\n    if (this._el) {\n      ////console.log(\"undelegateEvents el\", this._el);\n      let el = this._el;\n      if (isString(this._el)) {\n        el = document.querySelector(this._el);\n      }\n      if (el) {\n        ////console.log(\"undelegateEvents selected el\", el);\n        const new_el = el.cloneNode(true); //true means a deep copy\n\n        //console.log(\"undelegateEvents cloned el\", new_el);\n        if (new_el && new_el.parentNode) {\n          //console.log(\"undelegateEvents parent el\", new_el.parentNode);\n          el.parentNode.replaceChild(new_el, el);\n          //console.log(\"undelegateEvents replaced el\");\n        }\n      }\n      //this._el.removeEventListener(`.delegateEvents${this.cid}`);\n    }\n    return this;\n  };\n\n  /**\n   * A finer-grained `undelegateEvents` for removing a single delegated event.\n   * `selector` and `listener` are both optional.\n   */\n  undelegate(eventName, selector, listener) {\n    if (this._el) {\n      let el = this._el;\n      if (isString(this._el)) {\n        el = document.querySelector(this._el);\n      }\n      if (el) {\n        const matchesNL = el.querySelectorAll(selector);\n        if (matchesNL) {\n          const matches = Array.from(matchesNL);\n          let i = 0;\n          const l = matches.length;\n\n          for (i = 0; i < l; i++) {\n            ////console.log(\"match\", matches[i]);\n            matches[i].removeEventListener(eventName, listener);\n          }\n        }\n      }\n\n      //for (i = 0; i < l; i++) {\n      //  matches[i].removeEventListener(`${eventName}.delegateEvents${this.cid}`, listener);\n      //}\n    }\n    //this._el.removeEventListener(`${eventName}.delegateEvents${this.cid}`, selector, listener);\n    return this;\n  };\n\n  // Produces a DOM element to be assigned to your view. Exposed for\n  // subclasses using an alternative DOM manipulation API.\n  _createElement(tagName) {\n    return document.createElement(tagName);\n  };\n\n  // Ensure that the View has a DOM element to render into.\n  // If `this.el` is a string, pass it through querySelector, take the first\n  // matching element, and re-assign it to `el`. Otherwise, create\n  // an element from the `id`, `style` and `tagName` properties.\n  _ensureElement() {\n    if (!this._el) {\n      const attrs = extend({}, result(this, \"attributes\"));\n      if (this.id) {\n        attrs.id = this.id;\n      }\n      if (this._style) {\n        attrs[\"class\"] = this._style;\n      }\n      const el = this._createElement(this.tagName);\n      const body = document.querySelector(\"body\");\n      if (body) {\n        //console.debug(\"creating element \" + this.tagName + \" on body.\")\n        body.appendChild(el);\n      }\n      if (el) {\n        this.setElement(el);\n      }\n      this._setAttributes(attrs);\n    } else {\n      this.setElement(this._el);\n    }\n  };\n\n  // Set attributes from a hash on this view's element.  Exposed for\n  // subclasses using an alternative DOM manipulation API.\n  _setAttributes(attributes) {\n    let key;\n    for(key in attributes) {\n      if (this._el) {\n        let el = this._el;\n        if (isString(this._el)) {\n          el = document.querySelector(this._el);\n        }\n        if (el) {\n          el.setAttribute(key, attributes[key]);\n        }\n      }\n    }\n  };\n\n  /**\n  * The name of the view\n  * @property name The name of the view\n  */\n  set name(name) {\n    this._name = name;\n  };\n\n  get name() {\n    return this._name;\n  };\n\n  /**\n   * Adds a permission to the view\n   * @param {string} permission The permission to add\n   * @param {boolean} negative Flag to set a nagative permission (optional)\n   */\n  addPermission(permission, negative) {\n    if (!negative) {\n      negative = false;\n    }\n    if (permission !== null && !Array.isArray(permission)) {\n      const p = (negative) ? this._permissions.exclude : this._permissions.include;\n      p.push(permission);\n    }\n  };\n  /**\n   * Removes a permission to the view\n   * @param {string} permission The permission to remove\n   * @param {boolean} negative Flag to set a nagative permission (optional)\n   */\n  removePermission(permission, negative) {\n    if (!negative) {\n      negative = false;\n    }\n    if (permission !== null && !Array.isArray(permission)) {\n      const p = (negative) ? this._permissions.exclude : this._permissions.include;\n      p.splice((p.indexOf(permission)), 1);\n    }\n  };\n  /**\n   * Sets the permissions to the view\n   * @param {array} permissions The permissions to set\n   * @param {boolean} negative Flag to set a negative permission (optional)\n   */\n  set permissions(permissions) {\n    /*if (!negative) {\n      negative = false;\n    }\n    if (permissions !== null && Array.isArray(permissions)) {\n      if (negative) {\n        this._permissions.exclude = permissions;\n      } else {\n        this._permissions.include = permissions;\n      }\n    }*/\n    this._permissions = permissions;\n  };\n\n  /**\n   * The permissions to the view<br/>\n   * Return format:<br/>\n   * <pre>{\n   *     include: [],\n   *     exclude: []\n   * }</pre>\n   *\n   * @property {object} permissions\n   */\n  get permissions() {\n    return this._permissions;\n  };\n  /**\n   * Clears the permissions in the view\n   */\n  clearPermissions() {\n    this._permissions = {\n      include: [],\n      exclude: []\n    };\n  };\n  /**\n   * Matches a permission in the view\n   * @param {string} match The permissions to match\n   * @param {boolean} negative Flag to set a nagative permission (optional)\n   * @returns {boolean} Returns true if the match exists\n   */\n  matchesPermission(match, negative) {\n    if (!negative) {\n      negative = false;\n    }\n    const p = (negative) ? this._permissions.exclude : this._permissions.include;\n    return (p.indexOf(match) !== -1);\n  };\n  /**\n   * Callback to return if this view can display\n   * @returns {boolean} Returns true if this view can display\n   */\n  canDisplay() {\n    return true;\n  };\n};\n\nexport default AbstractView;\n","import AbstractView from \"./abstractView.js\";\nimport { isString } from \"next-core-utilities\";\n\n/**\n * View - the base view for handlng display in the MV* Concept\n * @extends AbstractView\n */\nclass View extends AbstractView {\n  constructor(options) {\n    super(options);\n  };\n\n  /**\n   * Render callback for the view\n   * @returns this Context of the view\n   */\n  render() {\n    if (this._el && this.template) {\n      let el = this._el;\n      if (isString(this._el)) {\n        el = document.querySelector(this._el);\n      }\n      if (el) {\n        el.innerHTML = this.template;\n      }\n    }\n    return this;\n  };\n\n  /**\n   * Remove the view and all binds\n   */\n  remove() {\n    /* off to unbind the events */\n    this.undelegateEvents();\n    this.off();\n    this.stopListening();\n    if (this._el) {\n      let el = this._el;\n      if (isString(this._el)) {\n        el = document.querySelector(this._el);\n      }\n      if (el) {\n        el.innerHTML = \"\";\n      }\n    }\n    return this;\n  };\n};\n\nexport default View;\n"],"sourceRoot":""}